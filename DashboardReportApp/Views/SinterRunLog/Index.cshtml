@{
    ViewData["Title"] = "Sintering";
}

<div class="container mt-4">
    <h1 class="text-center mb-4">Sintering</h1>

    @if (ViewData["Error"] != null)
    {
        <div class="alert alert-danger fade show" role="alert">
            @ViewData["Error"]
        </div>
    }

    @if (ViewData["Message"] != null)
    {
        <div class="alert alert-success fade show" role="alert">
            @ViewData["Message"]
        </div>
    }

    <h3 class="mt-4">Sintering Now</h3>
    <div class="card shadow">
        <div class="card-body">
    <div class="table-responsive">
        <table class="table table-striped table-bordered shadow-sm w-100">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Timestamp</th>
                    <th>Operator</th>
                    <th>Part</th>
                    <th>Oven</th>
                    <th>Process</th>
                    <th>Start DateTime</th>
                    <th>End DateTime</th>
                    <th>Notes</th>
                    <th>Run</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var skid in (List<SinterRunSkid>)ViewData["OpenSkids"])
                {
                    <tr>
                        <td>@skid.Id</td>
                        <td>@skid.Timestamp</td>
                        <td>@skid.Operator</td>
                        <td>@skid.Part</td>
                        <td>@skid.Furnace</td>
                        <td>@skid.Process</td>
                        <td>@skid.StartDateTime</td>
                        <td>@skid.EndDateTime</td>
                        <td>@skid.Notes</td>
                        <td>@skid.Run</td>
                        <td>
                            <form method="post" asp-action="CloseSkid" class="d-inline">
                                <input type="hidden" name="part" value="@skid.Part" />
                                <input type="hidden" name="furnace" value="@skid.Furnace" />
                                <button type="submit" class="btn btn-warning btn-sm w-100">
                                    <i class="bi bi-x-circle"></i> Close Skid
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    </div>
    </div>

    <h3 class="mt-4">Start Sintering</h3>
    <div class="card shadow">
        <div class="card-body">
            <form method="post" asp-action="StartSkid">
                <div class="mb-3">
                    <label for="operatorName" class="form-label">Operator:</label>
                    <select name="operatorName" id="operatorName" class="form-control">
                        @if (ViewData["Operators"] != null)
                        {
                            foreach (var operatorName in (List<string>)ViewData["Operators"])
                            {
                                <option value="@operatorName">@operatorName</option>
                            }
                        }
                        else
                        {
                            <option>No operators available</option>
                        }
                    </select>
                </div>

                <div class="mb-3">
                    <label for="part" class="form-label">Part:</label>
                    <input type="text" name="part" id="part" class="form-control" required />
                </div>

                <div class="mb-3">
                    <label for="furnace" class="form-label">Furnace:</label>
                    <select name="furnace" id="furnace" class="form-control">
                        @foreach (var furnace in (List<string>)ViewData["Furnaces"])
                        {
                            <option value="@furnace">@furnace</option>
                        }
                    </select>
                </div>

                <div class="mb-3">
                    <label for="process" class="form-label">Process:</label>
                    <select name="process" id="process" class="form-control">
                        <option value="Sinter">Sinter</option>
                        <option value="Anneal">Anneal</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="notes" class="form-label">Notes:</label>
                    <textarea name="notes" id="notes" class="form-control text-area-large"></textarea>
                </div>

                <button type="submit" class="btn btn-primary w-100"><i class="bi bi-play-circle"></i> Start Skid</button>
            </form>
        </div>
    </div>

    <h3 class="mt-4">Close All Skids by Furnace</h3>
    <div class="card shadow">
        <div class="card-body">
            <form method="post" asp-action="CloseSkidByFurnace">
                <div class="mb-3">
                    <label for="furnace" class="form-label">Select Furnace to Close All Skids:</label>
                    <select name="furnace" id="furnace" class="form-control">
                        @foreach (var furnace in (List<string>)ViewData["Furnaces"])
                        {
                            <option value="@furnace">@furnace</option>
                        }
                    </select>
                </div>

                <button type="submit" class="btn btn-danger w-100"><i class="bi bi-x-circle"></i> Close All Skids</button>
            </form>
        </div>
    </div>
</div>

<!-- Custom Styles -->
<!-- Custom Styles -->
<style>
    body {
        background-color: black !important;
        color: goldenrod !important;
    }

    .card {
        background-color: black !important;
        color: goldenrod !important;
        border: 1px solid goldenrod;
    }

    .table {
        color: goldenrod !important;
        background-color: black !important;
    }

        .table th, .table td {
            border-color: goldenrod !important;
        }

    .table-dark {
        background-color: black !important;
        color: goldenrod !important;
    }

    .form-control {
        background-color: black !important;
        color: goldenrod !important;
        border: 1px solid goldenrod !important;
    }

        .form-control::placeholder {
            color: goldenrod !important;
        }

    .btn:hover {
        transform: scale(1.05);
    }

    .text-area-large {
        min-height: 150px !important;
    }

    .table-responsive {
        overflow-x: auto;
        display: block;
    }
</style>